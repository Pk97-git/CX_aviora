
=== TICKETS TABLE ===
id                   uuid            NOT NULL   DEFAULT gen_random_uuid()
tenant_id            uuid            NOT NULL  
external_id          varchar         NULL      
external_source      varchar         NULL      
title                varchar         NULL      
description          text            NULL      
status               varchar         NULL       DEFAULT 'open'::character varying
priority             varchar         NULL       DEFAULT 'medium'::character varying
category             varchar         NULL      
subcategory          varchar         NULL      
intent               varchar         NULL      
sentiment            varchar         NULL      
urgency_score        numeric         NULL      
entities             jsonb           NULL      
assigned_to          uuid            NULL      
customer_id          uuid            NULL      
customer_email       varchar         NULL      
customer_name        varchar         NULL      
sla_due_at           timestamptz     NULL      
sla_breached         bool            NULL       DEFAULT false
tags                 _text           NULL      
metadata             jsonb           NULL      
created_at           timestamptz     NULL      
updated_at           timestamptz     NULL      
resolved_at          timestamptz     NULL      
closed_at            timestamptz     NULL      

=== AI_ANALYSIS TABLE ===
id                   uuid            NOT NULL   DEFAULT gen_random_uuid()
ticket_id            uuid            NOT NULL  
sentiment            float8          NULL      
intent               varchar         NULL      
urgency              varchar         NULL      
category             varchar         NULL      
priority_score       float8          NULL      
summary              text            NULL      
suggested_actions    jsonb           NULL      
created_at           timestamp       NOT NULL   DEFAULT CURRENT_TIMESTAMP