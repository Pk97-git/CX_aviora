-- Mock Data for Aivora Intelligence Platform
-- Comprehensive data for all API endpoints

-- Clear existing data
DELETE FROM ai_analysis;
DELETE FROM tickets;

-- Insert 50 realistic tickets with varied data
-- Categories: shipping, login, sizing, app_crash, payment, returns
-- Date range: Last 90 days
-- Statuses: open, in_progress, resolved, closed
-- Priorities: low, medium, high, urgent, critical

-- SHIPPING ISSUES (10 tickets)
INSERT INTO tickets (id, tenant_id, external_id, external_source, title, description, status, priority, category, subcategory, intent, assigned_to, customer_id, customer_email, customer_name, sla_due_at, sla_breached, tags, created_at, updated_at, resolved_at) VALUES
('11111111-1111-1111-1111-111111111111', 'tenant_001', 'TKT-10001', 'email', 'Package not delivered on time', 'Customer reported delayed shipment', 'resolved', 'high', 'shipping', 'delayed_shipment', 'delayed_shipment', 'agent_1', 'cust_001', 'support@acme.com', 'Acme Corp', NOW() - INTERVAL '5 days', 0, '["shipping", "high"]'::jsonb, NOW() - INTERVAL '7 days', NOW() - INTERVAL '5 days', NOW() - INTERVAL '5 days'),
('11111111-1111-1111-1111-111111111112', 'tenant_001', 'TKT-10002', 'chat', 'Tracking shows delivered but not received', 'Lost package issue', 'in_progress', 'urgent', 'shipping', 'lost_package', 'lost_package', 'agent_2', 'cust_002', 'help@techstart.io', 'TechStart Inc', NOW() + INTERVAL '6 hours', 0, '["shipping", "urgent"]'::jsonb, NOW() - INTERVAL '2 days', NOW() - INTERVAL '1 day', NULL),
('11111111-1111-1111-1111-111111111113', 'tenant_001', 'TKT-10003', 'phone', 'Wrong shipping address used', 'Address correction needed', 'resolved', 'medium', 'shipping', 'wrong_address', 'wrong_address', 'agent_1', 'cust_003', 'service@globalretail.com', 'Global Retail', NOW() - INTERVAL '10 days', 0, '["shipping", "medium"]'::jsonb, NOW() - INTERVAL '15 days', NOW() - INTERVAL '10 days', NOW() - INTERVAL '10 days'),
('11111111-1111-1111-1111-111111111114', 'tenant_001', 'TKT-10004', 'web', 'Shipment stuck in transit', 'Package not moving for 5 days', 'open', 'high', 'shipping', 'tracking_issue', 'tracking_issue', NULL, 'cust_004', 'support@fastship.co', 'FastShip Co', NOW() + INTERVAL '12 hours', 0, '["shipping", "high"]'::jsonb, NOW() - INTERVAL '1 day', NOW() - INTERVAL '1 day', NULL),
('11111111-1111-1111-1111-111111111115', 'tenant_001', 'TKT-10005', 'email', 'Delivery attempted but no one home', 'Redelivery requested', 'resolved', 'low', 'shipping', 'delivery_failed', 'delivery_failed', 'agent_3', 'cust_005', 'help@cloudbase.io', 'CloudBase', NOW() - INTERVAL '20 days', 0, '["shipping", "low"]'::jsonb, NOW() - INTERVAL '25 days', NOW() - INTERVAL '20 days', NOW() - INTERVAL '20 days'),
('11111111-1111-1111-1111-111111111116', 'tenant_001', 'TKT-10006', 'chat', 'International shipment delayed', 'Customs clearance issue', 'in_progress', 'medium', 'shipping', 'delayed_shipment', 'delayed_shipment', 'agent_2', 'cust_006', 'support@dataflow.com', 'DataFlow Ltd', NOW() + INTERVAL '24 hours', 0, '["shipping", "medium"]'::jsonb, NOW() - INTERVAL '3 days', NOW() - INTERVAL '1 day', NULL),
('11111111-1111-1111-1111-111111111117', 'tenant_001', 'TKT-10007', 'email', 'Package damaged during shipping', 'Replacement needed', 'resolved', 'high', 'shipping', 'damaged_package', 'damaged_package', 'agent_1', 'cust_007', 'cs@megamart.com', 'MegaMart', NOW() - INTERVAL '8 days', 0, '["shipping", "high"]'::jsonb, NOW() - INTERVAL '12 days', NOW() - INTERVAL '8 days', NOW() - INTERVAL '8 days'),
('11111111-1111-1111-1111-111111111118', 'tenant_001', 'TKT-10008', 'phone', 'Missing tracking number', 'Cannot track order', 'open', 'medium', 'shipping', 'tracking_issue', 'tracking_issue', NULL, 'cust_008', 'help@quickpay.com', 'QuickPay Inc', NOW() + INTERVAL '36 hours', 0, '["shipping", "medium"]'::jsonb, NOW() - INTERVAL '6 hours', NOW() - INTERVAL '6 hours', NULL),
('11111111-1111-1111-1111-111111111119', 'tenant_001', 'TKT-10009', 'web', 'Expedited shipping not applied', 'Charged for express but sent standard', 'resolved', 'urgent', 'shipping', 'shipping_error', 'shipping_error', 'agent_4', 'cust_009', 'support@stylehub.com', 'StyleHub', NOW() - INTERVAL '4 days', 0, '["shipping", "urgent"]'::jsonb, NOW() - INTERVAL '6 days', NOW() - INTERVAL '4 days', NOW() - INTERVAL '4 days'),
('11111111-1111-1111-1111-111111111120', 'tenant_001', 'TKT-10010', 'email', 'Package returned to sender', 'Address validation failed', 'closed', 'medium', 'shipping', 'return_to_sender', 'return_to_sender', 'agent_1', 'cust_010', 'service@techgear.pro', 'TechGear Pro', NOW() - INTERVAL '30 days', 0, '["shipping", "medium"]'::jsonb, NOW() - INTERVAL '35 days', NOW() - INTERVAL '30 days', NOW() - INTERVAL '30 days');

-- LOGIN ISSUES (10 tickets)
INSERT INTO tickets (id, tenant_id, external_id, external_source, title, description, status, priority, category, subcategory, intent, assigned_to, customer_id, customer_email, customer_name, sla_due_at, sla_breached, tags, created_at, updated_at, resolved_at) VALUES
('22222222-2222-2222-2222-222222222221', 'tenant_001', 'TKT-10011', 'chat', 'Cannot log into account', 'Login credentials not working', 'open', 'critical', 'login', 'login_failed', 'login_failed', NULL, 'cust_001', 'support@acme.com', 'Acme Corp', NOW() + INTERVAL '2 hours', 0, '["login", "critical"]'::jsonb, NOW() - INTERVAL '1 hour', NOW() - INTERVAL '1 hour', NULL),
('22222222-2222-2222-2222-222222222222', 'tenant_001', 'TKT-10012', 'email', 'Password reset link not working', 'Reset email received but link expired', 'in_progress', 'high', 'login', 'password_reset', 'password_reset', 'agent_5', 'cust_002', 'help@techstart.io', 'TechStart Inc', NOW() + INTERVAL '18 hours', 0, '["login", "high"]'::jsonb, NOW() - INTERVAL '4 hours', NOW() - INTERVAL '2 hours', NULL),
('22222222-2222-2222-2222-222222222223', 'tenant_001', 'TKT-10013', 'phone', 'Account locked after failed attempts', 'Too many login attempts', 'resolved', 'urgent', 'login', 'account_locked', 'account_locked', 'agent_3', 'cust_003', 'service@globalretail.com', 'Global Retail', NOW() - INTERVAL '2 days', 0, '["login", "urgent"]'::jsonb, NOW() - INTERVAL '3 days', NOW() - INTERVAL '2 days', NOW() - INTERVAL '2 days'),
('22222222-2222-2222-2222-222222222224', 'tenant_001', 'TKT-10014', 'web', 'Stuck in login loop on iOS app', 'App keeps redirecting to login', 'open', 'critical', 'login', 'login_loop', 'login_loop', NULL, 'cust_004', 'support@fastship.co', 'FastShip Co', NOW() + INTERVAL '3 hours', 0, '["login", "critical"]'::jsonb, NOW() - INTERVAL '30 minutes', NOW() - INTERVAL '30 minutes', NULL),
('22222222-2222-2222-2222-222222222225', 'tenant_001', 'TKT-10015', 'chat', '2FA code not arriving', 'SMS verification code delayed', 'in_progress', 'high', 'login', '2fa_issue', '2fa_issue', 'agent_2', 'cust_005', 'help@cloudbase.io', 'CloudBase', NOW() + INTERVAL '10 hours', 0, '["login", "high"]'::jsonb, NOW() - INTERVAL '3 hours', NOW() - INTERVAL '1 hour', NULL),
('22222222-2222-2222-2222-222222222226', 'tenant_001', 'TKT-10016', 'email', 'Email verification link expired', 'Cannot verify new account', 'resolved', 'medium', 'login', 'email_verification', 'email_verification', 'agent_1', 'cust_006', 'support@dataflow.com', 'DataFlow Ltd', NOW() - INTERVAL '5 days', 0, '["login", "medium"]'::jsonb, NOW() - INTERVAL '7 days', NOW() - INTERVAL '5 days', NOW() - INTERVAL '5 days'),
('22222222-2222-2222-2222-222222222227', 'tenant_001', 'TKT-10017', 'phone', 'SSO login not working', 'Google sign-in fails', 'open', 'high', 'login', 'sso_issue', 'sso_issue', NULL, 'cust_007', 'cs@megamart.com', 'MegaMart', NOW() + INTERVAL '20 hours', 0, '["login", "high"]'::jsonb, NOW() - INTERVAL '5 hours', NOW() - INTERVAL '5 hours', NULL),
('22222222-2222-2222-2222-222222222228', 'tenant_001', 'TKT-10018', 'web', 'Session expires too quickly', 'Logged out every 5 minutes', 'in_progress', 'medium', 'login', 'session_timeout', 'session_timeout', 'agent_4', 'cust_008', 'help@quickpay.com', 'QuickPay Inc', NOW() + INTERVAL '40 hours', 0, '["login", "medium"]'::jsonb, NOW() - INTERVAL '1 day', NOW() - INTERVAL '12 hours', NULL),
('22222222-2222-2222-2222-222222222229', 'tenant_001', 'TKT-10019', 'chat', 'Biometric login not recognized', 'Face ID fails repeatedly', 'resolved', 'low', 'login', 'biometric_issue', 'biometric_issue', 'agent_5', 'cust_009', 'support@stylehub.com', 'StyleHub', NOW() - INTERVAL '10 days', 0, '["login", "low"]'::jsonb, NOW() - INTERVAL '14 days', NOW() - INTERVAL '10 days', NOW() - INTERVAL '10 days'),
('22222222-2222-2222-2222-222222222230', 'tenant_001', 'TKT-10020', 'email', 'Account shows as suspended', 'Cannot access account', 'resolved', 'critical', 'login', 'account_suspended', 'account_suspended', 'agent_1', 'cust_010', 'service@techgear.pro', 'TechGear Pro', NOW() - INTERVAL '1 day', 0, '["login", "critical"]'::jsonb, NOW() - INTERVAL '2 days', NOW() - INTERVAL '1 day', NOW() - INTERVAL '1 day');

-- APP CRASH ISSUES (10 tickets)
INSERT INTO tickets (id, tenant_id, external_id, external_source, title, description, status, priority, category, subcategory, intent, assigned_to, customer_id, customer_email, customer_name, sla_due_at, sla_breached, tags, created_at, updated_at, resolved_at) VALUES
('33333333-3333-3333-3333-333333333331', 'tenant_001', 'TKT-10021', 'web', 'App crashes when trying to checkout', 'Payment screen causes crash', 'open', 'critical', 'app_crash', 'checkout_crash', 'checkout_crash', NULL, 'cust_001', 'support@acme.com', 'Acme Corp', NOW() + INTERVAL '2 hours', 0, '["app_crash", "critical"]'::jsonb, NOW() - INTERVAL '2 hours', NOW() - INTERVAL '2 hours', NULL),
('33333333-3333-3333-3333-333333333332', 'tenant_001', 'TKT-10022', 'chat', 'Search function not working', 'App freezes when searching', 'in_progress', 'urgent', 'app_crash', 'search_broken', 'search_broken', 'agent_2', 'cust_002', 'help@techstart.io', 'TechStart Inc', NOW() + INTERVAL '8 hours', 0, '["app_crash", "urgent"]'::jsonb, NOW() - INTERVAL '6 hours', NOW() - INTERVAL '3 hours', NULL),
('33333333-3333-3333-3333-333333333333', 'tenant_001', 'TKT-10023', 'email', 'App freezes on product page', 'Cannot view product details', 'resolved', 'high', 'app_crash', 'page_freeze', 'page_freeze', 'agent_3', 'cust_003', 'service@globalretail.com', 'Global Retail', NOW() - INTERVAL '3 days', 0, '["app_crash", "high"]'::jsonb, NOW() - INTERVAL '5 days', NOW() - INTERVAL '3 days', NOW() - INTERVAL '3 days'),
('33333333-3333-3333-3333-333333333334', 'tenant_001', 'TKT-10024', 'phone', 'Cannot complete purchase', 'App crashes at final step', 'open', 'critical', 'app_crash', 'checkout_crash', 'checkout_crash', NULL, 'cust_004', 'support@fastship.co', 'FastShip Co', NOW() + INTERVAL '1 hour', 0, '["app_crash", "critical"]'::jsonb, NOW() - INTERVAL '45 minutes', NOW() - INTERVAL '45 minutes', NULL),
('33333333-3333-3333-3333-333333333335', 'tenant_001', 'TKT-10025', 'web', 'Login screen keeps crashing', 'iOS app crash on launch', 'in_progress', 'critical', 'app_crash', 'ios_crash', 'ios_crash', 'agent_1', 'cust_005', 'help@cloudbase.io', 'CloudBase', NOW() + INTERVAL '3 hours', 0, '["app_crash", "critical"]'::jsonb, NOW() - INTERVAL '4 hours', NOW() - INTERVAL '2 hours', NULL),
('33333333-3333-3333-3333-333333333336', 'tenant_001', 'TKT-10026', 'chat', 'Android app crashes on startup', 'App won''t open', 'resolved', 'urgent', 'app_crash', 'android_crash', 'android_crash', 'agent_4', 'cust_006', 'support@dataflow.com', 'DataFlow Ltd', NOW() - INTERVAL '1 day', 0, '["app_crash", "urgent"]'::jsonb, NOW() - INTERVAL '2 days', NOW() - INTERVAL '1 day', NOW() - INTERVAL '1 day'),
('33333333-3333-3333-3333-333333333337', 'tenant_001', 'TKT-10027', 'email', 'Cart page not loading', 'White screen on cart', 'open', 'high', 'app_crash', 'cart_error', 'cart_error', NULL, 'cust_007', 'cs@megamart.com', 'MegaMart', NOW() + INTERVAL '16 hours', 0, '["app_crash", "high"]'::jsonb, NOW() - INTERVAL '8 hours', NOW() - INTERVAL '8 hours', NULL),
('33333333-3333-3333-3333-333333333338', 'tenant_001', 'TKT-10028', 'phone', 'Profile page crashes', 'Cannot access account settings', 'in_progress', 'medium', 'app_crash', 'profile_crash', 'profile_crash', 'agent_5', 'cust_008', 'help@quickpay.com', 'QuickPay Inc', NOW() + INTERVAL '36 hours', 0, '["app_crash", "medium"]'::jsonb, NOW() - INTERVAL '1 day', NOW() - INTERVAL '18 hours', NULL),
('33333333-3333-3333-3333-333333333339', 'tenant_001', 'TKT-10029', 'web', 'Image upload fails', 'App crashes when uploading photo', 'resolved', 'low', 'app_crash', 'upload_crash', 'upload_crash', 'agent_2', 'cust_009', 'support@stylehub.com', 'StyleHub', NOW() - INTERVAL '6 days', 0, '["app_crash", "low"]'::jsonb, NOW() - INTERVAL '9 days', NOW() - INTERVAL '6 days', NOW() - INTERVAL '6 days'),
('33333333-3333-3333-3333-333333333340', 'tenant_001', 'TKT-10030', 'chat', 'Notification settings crash app', 'Cannot change preferences', 'resolved', 'medium', 'app_crash', 'settings_crash', 'settings_crash', 'agent_3', 'cust_010', 'service@techgear.pro', 'TechGear Pro', NOW() - INTERVAL '12 days', 0, '["app_crash", "medium"]'::jsonb, NOW() - INTERVAL '16 days', NOW() - INTERVAL '12 days', NOW() - INTERVAL '12 days');

-- PAYMENT ISSUES (10 tickets)
INSERT INTO tickets (id, tenant_id, external_id, external_source, title, description, status, priority, category, subcategory, intent, assigned_to, customer_id, customer_email, customer_name, sla_due_at, sla_breached, tags, created_at, updated_at, resolved_at) VALUES
('44444444-4444-4444-4444-444444444441', 'tenant_001', 'TKT-10031', 'email', 'Payment declined but money charged', 'Double charge issue', 'open', 'urgent', 'payment', 'charge_dispute', 'charge_dispute', NULL, 'cust_001', 'support@acme.com', 'Acme Corp', NOW() + INTERVAL '8 hours', 0, '["payment", "urgent"]'::jsonb, NOW() - INTERVAL '4 hours', NOW() - INTERVAL '4 hours', NULL),
('44444444-4444-4444-4444-444444444442', 'tenant_001', 'TKT-10032', 'phone', 'Refund not received after 7 days', 'Refund processing delay', 'in_progress', 'high', 'payment', 'refund_request', 'refund_request', 'agent_1', 'cust_002', 'help@techstart.io', 'TechStart Inc', NOW() + INTERVAL '16 hours', 0, '["payment", "high"]'::jsonb, NOW() - INTERVAL '8 days', NOW() - INTERVAL '1 day', NULL),
('44444444-4444-4444-4444-444444444443', 'tenant_001', 'TKT-10033', 'chat', 'Duplicate charge on card', 'Charged twice for same order', 'resolved', 'urgent', 'payment', 'charge_dispute', 'charge_dispute', 'agent_2', 'cust_003', 'service@globalretail.com', 'Global Retail', NOW() - INTERVAL '2 days', 0, '["payment', "urgent"]'::jsonb, NOW() - INTERVAL '4 days', NOW() - INTERVAL '2 days', NOW() - INTERVAL '2 days'),
('44444444-4444-4444-4444-444444444444', 'tenant_001', 'TKT-10034', 'web', 'Cannot add new payment method', 'Card validation fails', 'open', 'medium', 'payment', 'payment_method_issue', 'payment_method_issue', NULL, 'cust_004', 'support@fastship.co', 'FastShip Co', NOW() + INTERVAL '40 hours', 0, '["payment", "medium"]'::jsonb, NOW() - INTERVAL '12 hours', NOW() - INTERVAL '12 hours', NULL),
('44444444-4444-4444-4444-444444444445', 'tenant_001', 'TKT-10035', 'email', 'Transaction failed but order pending', 'Payment status unclear', 'in_progress', 'high', 'payment', 'payment_failed', 'payment_failed', 'agent_3', 'cust_005', 'help@cloudbase.io', 'CloudBase', NOW() + INTERVAL '18 hours', 0, '["payment", "high"]'::jsonb, NOW() - INTERVAL '6 hours', NOW() - INTERVAL '3 hours', NULL),
('44444444-4444-4444-4444-444444444446', 'tenant_001', 'TKT-10036', 'phone', 'PayPal payment not processing', 'Alternative payment method issue', 'resolved', 'medium', 'payment', 'payment_failed', 'payment_failed', 'agent_4', 'cust_006', 'support@dataflow.com', 'DataFlow Ltd', NOW() - INTERVAL '5 days', 0, '["payment", "medium"]'::jsonb, NOW() - INTERVAL '8 days', NOW() - INTERVAL '5 days', NOW() - INTERVAL '5 days'),
('44444444-4444-4444-4444-444444444447', 'tenant_001', 'TKT-10037', 'chat', 'Credit card CVV rejected', 'Security code validation error', 'open', 'low', 'payment', 'payment_method_issue', 'payment_method_issue', NULL, 'cust_007', 'cs@megamart.com', 'MegaMart', NOW() + INTERVAL '60 hours', 0, '["payment", "low"]'::jsonb, NOW() - INTERVAL '1 day', NOW() - INTERVAL '1 day', NULL),
('44444444-4444-4444-4444-444444444448', 'tenant_001', 'TKT-10038', 'web', 'Subscription charge unexpected', 'Auto-renewal not cancelled', 'in_progress', 'urgent', 'payment', 'subscription_issue', 'subscription_issue', 'agent_5', 'cust_008', 'help@quickpay.com', 'QuickPay Inc', NOW() + INTERVAL '10 hours', 0, '["payment", "urgent"]'::jsonb, NOW() - INTERVAL '2 hours', NOW() - INTERVAL '1 hour', NULL),
('44444444-4444-4444-4444-444444444449', 'tenant_001', 'TKT-10039', 'email', 'Promo code not applying discount', 'Coupon code invalid', 'resolved', 'low', 'payment', 'promo_issue', 'promo_issue', 'agent_1', 'cust_009', 'support@stylehub.com', 'StyleHub', NOW() - INTERVAL '15 days', 0, '["payment", "low"]'::jsonb, NOW() - INTERVAL '18 days', NOW() - INTERVAL '15 days', NOW() - INTERVAL '15 days'),
('44444444-4444-4444-4444-444444444450', 'tenant_001', 'TKT-10040', 'phone', 'International payment declined', 'Currency conversion issue', 'resolved', 'high', 'payment', 'payment_failed', 'payment_failed', 'agent_2', 'cust_010', 'service@techgear.pro', 'TechGear Pro', NOW() - INTERVAL '7 days', 0, '["payment", "high"]'::jsonb, NOW() - INTERVAL '10 days', NOW() - INTERVAL '7 days', NOW() - INTERVAL '7 days');

-- SIZING/RETURNS ISSUES (10 tickets)
INSERT INTO tickets (id, tenant_id, external_id, external_source, title, description, status, priority, category, subcategory, intent, assigned_to, customer_id, customer_email, customer_name, sla_due_at, sla_breached, tags, created_at, updated_at, resolved_at) VALUES
('55555555-5555-5555-5555-555555555551', 'tenant_001', 'TKT-10041', 'web', 'Product does not fit as expected', 'Size runs small', 'open', 'low', 'sizing', 'wrong_size', 'wrong_size', NULL, 'cust_001', 'support@acme.com', 'Acme Corp', NOW() + INTERVAL '60 hours', 0, '["sizing", "low"]'::jsonb, NOW() - INTERVAL '2 days', NOW() - INTERVAL '2 days', NULL),
('55555555-5555-5555-5555-555555555552', 'tenant_001', 'TKT-10042', 'email', 'Size chart was confusing', 'Measurements unclear', 'in_progress', 'low', 'sizing', 'size_chart_unclear', 'size_chart_unclear', 'agent_3', 'cust_002', 'help@techstart.io', 'TechStart Inc', NOW() + INTERVAL '48 hours', 0, '["sizing", "low"]'::jsonb, NOW() - INTERVAL '1 day', NOW() - INTERVAL '12 hours', NULL),
('55555555-5555-5555-5555-555555555553', 'tenant_001', 'TKT-10043', 'chat', 'Need to return and get different size', 'Exchange request', 'resolved', 'medium', 'sizing', 'return_request', 'return_request', 'agent_4', 'cust_003', 'service@globalretail.com', 'Global Retail', NOW() - INTERVAL '6 days', 0, '["sizing", "medium"]'::jsonb, NOW() - INTERVAL '9 days', NOW() - INTERVAL '6 days', NOW() - INTERVAL '6 days'),
('55555555-5555-5555-5555-555555555554', 'tenant_001', 'TKT-10044', 'phone', 'Item runs small want to exchange', 'Size discrepancy', 'open', 'low', 'sizing', 'exchange_needed', 'exchange_needed', NULL, 'cust_004', 'support@fastship.co', 'FastShip Co', NOW() + INTERVAL '65 hours', 0, '["sizing", "low"]'::jsonb, NOW() - INTERVAL '3 days', NOW() - INTERVAL '3 days', NULL),
('55555555-5555-5555-5555-555555555555', 'tenant_001', 'TKT-10045', 'web', 'Ordered wrong size how to return', 'Return process question', 'in_progress', 'low', 'sizing', 'return_request', 'return_request', 'agent_5', 'cust_005', 'help@cloudbase.io', 'CloudBase', NOW() + INTERVAL '55 hours', 0, '["sizing", "low"]'::jsonb, NOW() - INTERVAL '18 hours', NOW() - INTERVAL '10 hours', NULL),
('55555555-5555-5555-5555-555555555556', 'tenant_001', 'TKT-10046', 'email', 'Color different than shown online', 'Product mismatch', 'resolved', 'medium', 'sizing', 'product_mismatch', 'product_mismatch', 'agent_1', 'cust_006', 'support@dataflow.com', 'DataFlow Ltd', NOW() - INTERVAL '11 days', 0, '["sizing", "medium"]'::jsonb, NOW() - INTERVAL '14 days', NOW() - INTERVAL '11 days', NOW() - INTERVAL '11 days'),
('55555555-5555-5555-5555-555555555557', 'tenant_001', 'TKT-10047', 'chat', 'Material quality not as described', 'Product quality issue', 'open', 'medium', 'sizing', 'quality_issue', 'quality_issue', NULL, 'cust_007', 'cs@megamart.com', 'MegaMart', NOW() + INTERVAL '42 hours', 0, '["sizing", "medium"]'::jsonb, NOW() - INTERVAL '6 hours', NOW() - INTERVAL '6 hours', NULL),
('55555555-5555-5555-5555-555555555558', 'tenant_001', 'TKT-10048', 'phone', 'Return label not in package', 'Missing return materials', 'in_progress', 'medium', 'sizing', 'return_label', 'return_label', 'agent_2', 'cust_008', 'help@quickpay.com', 'QuickPay Inc', NOW() + INTERVAL '38 hours', 0, '["sizing", "medium"]'::jsonb, NOW() - INTERVAL '1 day', NOW() - INTERVAL '8 hours', NULL),
('55555555-5555-5555-5555-555555555559', 'tenant_001', 'TKT-10049', 'web', 'Want to return but past 30 days', 'Return policy exception request', 'resolved', 'low', 'sizing', 'return_policy', 'return_policy', 'agent_3', 'cust_009', 'support@stylehub.com', 'StyleHub', NOW() - INTERVAL '20 days', 0, '["sizing", "low"]'::jsonb, NOW() - INTERVAL '25 days', NOW() - INTERVAL '20 days', NOW() - INTERVAL '20 days'),
('55555555-5555-5555-5555-555555555560', 'tenant_001', 'TKT-10050', 'email', 'Item arrived damaged need return', 'Damaged product', 'resolved', 'high', 'sizing', 'damaged_item', 'damaged_item', 'agent_4', 'cust_010', 'service@techgear.pro', 'TechGear Pro', NOW() - INTERVAL '3 days', 0, '["sizing", "high"]'::jsonb, NOW() - INTERVAL '5 days', NOW() - INTERVAL '3 days', NOW() - INTERVAL '3 days');

-- Now insert AI Analysis for all 50 tickets
-- Sentiment correlates with status and priority
INSERT INTO ai_analysis (id, ticket_id, sentiment, intent, urgency, category, priority_score, summary, suggested_actions, created_at) VALUES
-- Shipping (IDs starting with 11111111)
('a1111111-1111-1111-1111-111111111111', '11111111-1111-1111-1111-111111111111', 75.0, 'delayed_shipment', 'high', 'shipping', 65.0, 'Shipping delay resolved. Customer satisfied with resolution.', '["Contact shipping carrier", "Provide tracking update", "Offer expedited shipping"]'::jsonb, NOW() - INTERVAL '7 days' + INTERVAL '10 minutes'),
('a1111111-1111-1111-1111-111111111112', '11111111-1111-1111-1111-111111111112', 28.0, 'lost_package', 'urgent', 'shipping', 85.0, 'Lost package issue. Customer frustrated. Requires immediate attention.', '["Issue replacement shipment", "Escalate to logistics team", "Provide refund option"]'::jsonb, NOW() - INTERVAL '2 days' + INTERVAL '5 minutes'),
('a1111111-1111-1111-1111-111111111113', '11111111-1111-1111-1111-111111111113', 80.0, 'wrong_address', 'medium', 'shipping', 45.0, 'Address correction completed successfully.', '["Update shipping address", "Reship to correct location"]'::jsonb, NOW() - INTERVAL '15 days' + INTERVAL '15 minutes'),
('a1111111-1111-1111-1111-111111111114', '11111111-1111-1111-1111-111111111114', 35.0, 'tracking_issue', 'high', 'shipping', 70.0, 'Package stuck in transit. Customer concerned about delivery.', '["Contact carrier for update", "Provide estimated delivery date"]'::jsonb, NOW() - INTERVAL '1 day' + INTERVAL '8 minutes'),
('a1111111-1111-1111-1111-111111111115', '11111111-1111-1111-1111-111111111115', 85.0, 'delivery_failed', 'low', 'shipping', 25.0, 'Redelivery scheduled. Customer satisfied.', '["Schedule redelivery", "Provide delivery instructions"]'::jsonb, NOW() - INTERVAL '25 days' + INTERVAL '12 minutes'),
('a1111111-1111-1111-1111-111111111116', '11111111-1111-1111-1111-111111111116', 55.0, 'delayed_shipment', 'medium', 'shipping', 50.0, 'International shipment delayed at customs.', '["Contact customs broker", "Provide clearance documentation"]'::jsonb, NOW() - INTERVAL '3 days' + INTERVAL '7 minutes'),
('a1111111-1111-1111-1111-111111111117', '11111111-1111-1111-1111-111111111117', 72.0, 'damaged_package', 'high', 'shipping', 68.0, 'Damaged package replaced. Customer happy with service.', '["Issue replacement", "Investigate shipping damage"]'::jsonb, NOW() - INTERVAL '12 days' + INTERVAL '20 minutes'),
('a1111111-1111-1111-1111-111111111118', '11111111-1111-1111-1111-111111111118', 42.0, 'tracking_issue', 'medium', 'shipping', 48.0, 'Missing tracking number. Customer cannot monitor shipment.', '["Provide tracking number", "Update shipping system"]'::jsonb, NOW() - INTERVAL '6 hours' + INTERVAL '5 minutes'),
('a1111111-1111-1111-1111-111111111119', '11111111-1111-1111-1111-111111111119', 78.0, 'shipping_error', 'urgent', 'shipping', 82.0, 'Expedited shipping error corrected. Refund issued.', '["Issue refund for shipping", "Apply correct shipping method"]'::jsonb, NOW() - INTERVAL '6 days' + INTERVAL '18 minutes'),
('a1111111-1111-1111-1111-111111111120', '11111111-1111-1111-1111-111111111120', 88.0, 'return_to_sender', 'medium', 'shipping', 42.0, 'Address validation issue resolved.', '["Validate shipping address", "Reship package"]'::jsonb, NOW() - INTERVAL '35 days' + INTERVAL '25 minutes'),

-- Login (IDs starting with 22222222)
('a2222222-2222-2222-2222-222222222221', '22222222-2222-2222-2222-222222222221', 18.0, 'login_failed', 'critical', 'login', 95.0, 'Critical login failure. Customer locked out of account.', '["Reset password immediately", "Unlock account", "Escalate to engineering"]'::jsonb, NOW() - INTERVAL '1 hour' + INTERVAL '3 minutes'),
('a2222222-2222-2222-2222-222222222222', '22222222-2222-2222-2222-222222222222', 32.0, 'password_reset', 'high', 'login', 72.0, 'Password reset link expired. Customer frustrated.', '["Send new reset link", "Extend link validity"]'::jsonb, NOW() - INTERVAL '4 hours' + INTERVAL '6 minutes'),
('a2222222-2222-2222-2222-222222222223', '22222222-2222-2222-2222-222222222223', 82.0, 'account_locked', 'urgent', 'login', 80.0, 'Account unlocked successfully. Customer can access now.', '["Unlock account", "Reset failed attempt counter"]'::jsonb, NOW() - INTERVAL '3 days' + INTERVAL '15 minutes'),
('a2222222-2222-2222-2222-222222222224', '22222222-2222-2222-2222-222222222224', 15.0, 'login_loop', 'critical', 'login', 98.0, 'Critical iOS login loop bug. Multiple VIP customers affected.', '["Escalate to engineering", "Deploy hotfix", "Notify affected users"]'::jsonb, NOW() - INTERVAL '30 minutes' + INTERVAL '2 minutes'),
('a2222222-2222-2222-2222-222222222225', '22222222-2222-2222-2222-222222222225', 38.0, '2fa_issue', 'high', 'login', 68.0, '2FA SMS delay. Customer cannot complete login.', '["Resend 2FA code", "Check SMS gateway", "Offer alternative 2FA"]'::jsonb, NOW() - INTERVAL '3 hours' + INTERVAL '8 minutes'),
('a2222222-2222-2222-2222-222222222226', '22222222-2222-2222-2222-222222222226', 78.0, 'email_verification', 'medium', 'login', 45.0, 'Email verification link resent. Account activated.', '["Resend verification email", "Extend link expiry"]'::jsonb, NOW() - INTERVAL '7 days' + INTERVAL '12 minutes'),
('a2222222-2222-2222-2222-222222222227', '22222222-2222-2222-2222-222222222227', 25.0, 'sso_issue', 'high', 'login', 75.0, 'SSO integration failure. Google sign-in not working.', '["Check SSO configuration", "Test OAuth flow", "Contact SSO provider"]'::jsonb, NOW() - INTERVAL '5 hours' + INTERVAL '4 minutes'),
('a2222222-2222-2222-2222-222222222228', '22222222-2222-2222-2222-222222222228', 52.0, 'session_timeout', 'medium', 'login', 48.0, 'Session timeout too aggressive. Investigating settings.', '["Adjust session timeout", "Review security policy"]'::jsonb, NOW() - INTERVAL '1 day' + INTERVAL '10 minutes'),
('a2222222-2222-2222-2222-222222222229', '22222222-2222-2222-2222-222222222229', 90.0, 'biometric_issue', 'low', 'login', 22.0, 'Biometric login reconfigured. Face ID working now.', '["Reconfigure biometric settings", "Test Face ID"]'::jsonb, NOW() - INTERVAL '14 days' + INTERVAL '18 minutes'),
('a2222222-2222-2222-2222-222222222230', '22222222-2222-2222-2222-222222222230', 85.0, 'account_suspended', 'critical', 'login', 92.0, 'Account suspension lifted. Billing issue resolved.', '["Unsuspend account", "Resolve billing issue"]'::jsonb, NOW() - INTERVAL '2 days' + INTERVAL '22 minutes'),

-- App Crash (IDs starting with 33333333)
('a3333333-3333-3333-3333-333333333331', '33333333-3333-3333-3333-333333333331', 12.0, 'checkout_crash', 'critical', 'app_crash', 96.0, 'Critical checkout crash. Revenue impact. Immediate fix needed.', '["Deploy emergency patch", "Rollback recent changes", "Notify engineering team"]'::jsonb, NOW() - INTERVAL '2 hours' + INTERVAL '5 minutes'),
('a3333333-3333-3333-3333-333333333332', '33333333-3333-3333-3333-333333333332', 22.0, 'search_broken', 'urgent', 'app_crash', 88.0, 'Search functionality broken. Major UX impact.', '["Fix search indexing", "Restart search service", "Test search queries"]'::jsonb, NOW() - INTERVAL '6 hours' + INTERVAL '7 minutes'),
('a3333333-3333-3333-3333-333333333333', '33333333-3333-3333-3333-333333333333', 76.0, 'page_freeze', 'high', 'app_crash', 70.0, 'Product page freeze resolved. Performance optimization applied.', '["Optimize page loading", "Reduce image sizes", "Enable caching"]'::jsonb, NOW() - INTERVAL '5 days' + INTERVAL '14 minutes'),
('a3333333-3333-3333-3333-333333333334', '33333333-3333-3333-3333-333333333334', 10.0, 'checkout_crash', 'critical', 'app_crash', 98.0, 'Critical checkout crash. Customer cannot complete purchase.', '["Emergency hotfix", "Test payment flow", "Monitor error logs"]'::jsonb, NOW() - INTERVAL '45 minutes' + INTERVAL '3 minutes'),
('a3333333-3333-3333-3333-333333333335', '33333333-3333-3333-3333-333333333335', 16.0, 'ios_crash', 'critical', 'app_crash', 94.0, 'iOS app crash on launch. Latest update caused regression.', '["Rollback iOS update", "Fix crash bug", "Submit app store update"]'::jsonb, NOW() - INTERVAL '4 hours' + INTERVAL '9 minutes'),
('a3333333-3333-3333-3333-333333333336', '33333333-3333-3333-3333-333333333336', 80.0, 'android_crash', 'urgent', 'app_crash', 84.0, 'Android crash fixed. App stable now.', '["Deploy Android patch", "Test on multiple devices"]'::jsonb, NOW() - INTERVAL '2 days' + INTERVAL '16 minutes'),
('a3333333-3333-3333-3333-333333333337', '33333333-3333-3333-3333-333333333337', 28.0, 'cart_error', 'high', 'app_crash', 74.0, 'Cart page white screen. JavaScript error identified.', '["Fix JavaScript error", "Test cart functionality"]'::jsonb, NOW() - INTERVAL '8 hours' + INTERVAL '6 minutes'),
('a3333333-3333-3333-3333-333333333338', '33333333-3333-3333-3333-333333333338', 48.0, 'profile_crash', 'medium', 'app_crash', 52.0, 'Profile page crash under investigation.', '["Debug profile page", "Check API endpoints"]'::jsonb, NOW() - INTERVAL '1 day' + INTERVAL '11 minutes'),
('a3333333-3333-3333-3333-333333333339', '33333333-3333-3333-3333-333333333339', 88.0, 'upload_crash', 'low', 'app_crash', 28.0, 'Image upload issue resolved. File size limit adjusted.', '["Increase file size limit", "Optimize image compression"]'::jsonb, NOW() - INTERVAL '9 days' + INTERVAL '19 minutes'),
('a3333333-3333-3333-3333-333333333340', '33333333-3333-3333-3333-333333333340', 82.0, 'settings_crash', 'medium', 'app_crash', 44.0, 'Settings page crash fixed. Preferences saving correctly.', '["Fix settings persistence", "Test all preference options"]'::jsonb, NOW() - INTERVAL '16 days' + INTERVAL '24 minutes'),

-- Payment (IDs starting with 44444444)
('a4444444-4444-4444-4444-444444444441', '44444444-4444-4444-4444-444444444441', 20.0, 'charge_dispute', 'urgent', 'payment', 86.0, 'Double charge reported. Customer very upset. Refund needed.', '["Issue immediate refund", "Investigate payment gateway", "Apologize to customer"]'::jsonb, NOW() - INTERVAL '4 hours' + INTERVAL '4 minutes'),
('a4444444-4444-4444-4444-444444444442', '44444444-4444-4444-4444-444444444442', 35.0, 'refund_request', 'high', 'payment', 72.0, 'Refund processing delayed. Customer waiting 7 days.', '["Expedite refund", "Check payment processor", "Notify customer of status"]'::jsonb, NOW() - INTERVAL '8 days' + INTERVAL '8 minutes'),
('a4444444-4444-4444-4444-444444444443', '44444444-4444-4444-4444-444444444443', 78.0, 'charge_dispute', 'urgent', 'payment', 82.0, 'Duplicate charge refunded. Customer satisfied.', '["Process refund", "Fix duplicate charge bug"]'::jsonb, NOW() - INTERVAL '4 days' + INTERVAL '13 minutes'),
('a4444444-4444-4444-4444-444444444444', '44444444-4444-4444-4444-444444444444', 45.0, 'payment_method_issue', 'medium', 'payment', 50.0, 'Card validation failing. Customer cannot add payment method.', '["Check card validation logic", "Test with different cards"]'::jsonb, NOW() - INTERVAL '12 hours' + INTERVAL '7 minutes'),
('a4444444-4444-4444-4444-444444444445', '44444444-4444-4444-4444-444444444445', 32.0, 'payment_failed', 'high', 'payment', 68.0, 'Payment failed but order shows pending. Status unclear.', '["Clarify order status", "Retry payment", "Contact payment gateway"]'::jsonb, NOW() - INTERVAL '6 hours' + INTERVAL '9 minutes'),
('a4444444-4444-4444-4444-444444444446', '44444444-4444-4444-4444-444444444446', 82.0, 'payment_failed', 'medium', 'payment', 48.0, 'PayPal integration fixed. Payment processing normally.', '["Fix PayPal integration", "Test alternative payments"]'::jsonb, NOW() - INTERVAL '8 days' + INTERVAL '15 minutes'),
('a4444444-4444-4444-4444-444444444447', '44444444-4444-4444-4444-444444444447', 58.0, 'payment_method_issue', 'low', 'payment', 32.0, 'CVV validation issue. Customer trying to complete purchase.', '["Check CVV validation", "Verify card details"]'::jsonb, NOW() - INTERVAL '1 day' + INTERVAL '6 minutes'),
('a4444444-4444-4444-4444-444444444448', '44444444-4444-4444-4444-444444444448', 25.0, 'subscription_issue', 'urgent', 'payment', 84.0, 'Unexpected subscription charge. Customer wants refund.', '["Cancel subscription", "Issue refund", "Update billing settings"]'::jsonb, NOW() - INTERVAL '2 hours' + INTERVAL '5 minutes'),
('a4444444-4444-4444-4444-444444444449', '44444444-4444-4444-4444-444444444449', 92.0, 'promo_issue', 'low', 'payment', 24.0, 'Promo code issue resolved. Discount applied.', '["Apply promo code", "Verify coupon validity"]'::jsonb, NOW() - INTERVAL '18 days' + INTERVAL '20 minutes'),
('a4444444-4444-4444-4444-444444444450', '44444444-4444-4444-4444-444444444450', 75.0, 'payment_failed', 'high', 'payment', 70.0, 'International payment processed. Currency conversion fixed.', '["Enable international payments", "Fix currency conversion"]'::jsonb, NOW() - INTERVAL '10 days' + INTERVAL '17 minutes'),

-- Sizing/Returns (IDs starting with 55555555)
('a5555555-5555-5555-5555-555555555551', '55555555-5555-5555-5555-555555555551', 62.0, 'wrong_size', 'low', 'sizing', 28.0, 'Size issue. Customer requesting return/exchange.', '["Provide return label", "Suggest correct size", "Update size chart"]'::jsonb, NOW() - INTERVAL '2 days' + INTERVAL '10 minutes'),
('a5555555-5555-5555-5555-555555555552', '55555555-5555-5555-5555-555555555552', 55.0, 'size_chart_unclear', 'low', 'sizing', 32.0, 'Size chart feedback. Customer found measurements confusing.', '["Improve size chart", "Add measurement guide"]'::jsonb, NOW() - INTERVAL '1 day' + INTERVAL '8 minutes'),
('a5555555-5555-5555-5555-555555555553', '55555555-5555-5555-5555-555555555553', 85.0, 'return_request', 'medium', 'sizing', 42.0, 'Exchange processed successfully. Customer happy.', '["Process exchange", "Send return label", "Ship new size"]'::jsonb, NOW() - INTERVAL '9 days' + INTERVAL '14 minutes'),
('a5555555-5555-5555-5555-555555555554', '55555555-5555-5555-5555-555555555554', 58.0, 'exchange_needed', 'low', 'sizing', 30.0, 'Size exchange requested. Processing return.', '["Approve exchange", "Provide return instructions"]'::jsonb, NOW() - INTERVAL '3 days' + INTERVAL '7 minutes'),
('a5555555-5555-5555-5555-555555555555', '55555555-5555-5555-5555-555555555555', 68.0, 'return_request', 'low', 'sizing', 26.0, 'Return process explained. Customer proceeding with return.', '["Send return label", "Provide return instructions"]'::jsonb, NOW() - INTERVAL '18 hours' + INTERVAL '9 minutes'),
('a5555555-5555-5555-5555-555555555556', '55555555-5555-5555-5555-555555555556', 72.0, 'product_mismatch', 'medium', 'sizing', 46.0, 'Product color mismatch resolved. Refund issued.', '["Issue refund", "Update product photos"]'::jsonb, NOW() - INTERVAL '14 days' + INTERVAL '16 minutes'),
('a5555555-5555-5555-5555-555555555557', '55555555-5555-5555-5555-555555555557', 42.0, 'quality_issue', 'medium', 'sizing', 52.0, 'Product quality concern. Investigating with supplier.', '["Contact supplier", "Offer replacement", "Issue refund"]'::jsonb, NOW() - INTERVAL '6 hours' + INTERVAL '5 minutes'),
('a5555555-5555-5555-5555-555555555558', '55555555-5555-5555-5555-555555555558', 52.0, 'return_label', 'medium', 'sizing', 48.0, 'Return label sent via email. Customer can proceed.', '["Email return label", "Provide tracking for return"]'::jsonb, NOW() - INTERVAL '1 day' + INTERVAL '11 minutes'),
('a5555555-5555-5555-5555-555555555559', '55555555-5555-5555-5555-555555555559', 88.0, 'return_policy', 'low', 'sizing', 22.0, 'Return policy exception approved. Customer grateful.', '["Approve exception", "Process return", "Issue refund"]'::jsonb, NOW() - INTERVAL '25 days' + INTERVAL '21 minutes'),
('a5555555-5555-5555-5555-555555555560', '55555555-5555-5555-5555-555555555560', 76.0, 'damaged_item', 'high', 'sizing', 72.0, 'Damaged item replaced. Customer satisfied with service.', '["Issue replacement", "Investigate shipping damage"]'::jsonb, NOW() - INTERVAL '5 days' + INTERVAL '18 minutes');

-- Verify data
SELECT 
    COUNT(*) as total_tickets,
    COUNT(CASE WHEN status = 'open' THEN 1 END) as open_tickets,
    COUNT(CASE WHEN status = 'in_progress' THEN 1 END) as in_progress,
    COUNT(CASE WHEN status = 'resolved' THEN 1 END) as resolved,
    COUNT(CASE WHEN status = 'closed' THEN 1 END) as closed
FROM tickets;

SELECT 
    category,
    COUNT(*) as count,
    AVG(CASE WHEN priority = 'low' THEN 1 WHEN priority = 'medium' THEN 2 WHEN priority = 'high' THEN 3 WHEN priority = 'urgent' THEN 4 WHEN priority = 'critical' THEN 5 END) as avg_priority
FROM tickets
GROUP BY category
ORDER BY count DESC;

SELECT COUNT(*) as total_analyses FROM ai_analysis;
